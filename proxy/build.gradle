plugins {
    id "xyz.jpenilla.run-velocity" version "2.3.0"
    id "xyz.jpenilla.run-waterfall" version "2.3.0"
}

dependencies {
    shadow api(project(path: ':client', configuration: 'shadow'))

    compileOnly "io.github.waterfallmc:waterfall-api:${project.waterfall_version}"
    compileOnly "com.velocitypowered:velocity-api:${project.velocity_version}"
    annotationProcessor "com.velocitypowered:velocity-api:${project.velocity_version}"
}

shadowJar {
    dependencies {
        exclude(dependency("io.netty:.*:.*"))
        exclude(dependency("com.esotericsoftware:kryo5:.*"))
    }
}

jar.finalizedBy(shadowJar)

tasks {
    runVelocity {
        velocityVersion(project.velocity_version)
    }
    runWaterfall {
        waterfallVersion("1.20")
    }
}