plugins {
    id "xyz.jpenilla.run-paper" version "2.3.0"
    id "io.papermc.paperweight.userdev" version "1.7.0"
}

dependencies {
    compileOnly project(path: ':loader-common', configuration: 'default')
    paperweight.paperDevBundle(project.paper_version)
}

jar {
    archiveFileName = "protoweaver-${version}-paper.jar"
    from {
        exclude "architectury.common.marker"
        duplicatesStrategy = DuplicatesStrategy.EXCLUDE
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

tasks {
    runServer {
        minecraftVersion(project.minecraft_version)
    }
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            artifactId = "protoweaver-${version}-paper.jar" as Publication
        }
    }
}